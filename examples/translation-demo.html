<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Shadow Translate Bridge Demo</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;600&display=swap"
    />
    <style>
      :root {
        color-scheme: light;
        --ink: #1f2230;
        --muted: #6b7280;
        --accent: #1f6feb;
        --bg-start: #f6f1e6;
        --bg-end: #eef5ff;
        --card: #ffffff;
        --ring: rgba(31, 111, 235, 0.25);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "IBM Plex Sans", "Segoe UI", sans-serif;
        color: var(--ink);
        background: radial-gradient(120% 120% at 20% 0%, var(--bg-start), var(--bg-end));
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 40px 20px;
      }

      .frame {
        width: min(960px, 100%);
        background: var(--card);
        border-radius: 24px;
        padding: 32px;
        box-shadow: 0 24px 60px rgba(31, 34, 48, 0.12);
        border: 1px solid rgba(31, 34, 48, 0.08);
      }

      .heading {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .heading h1 {
        margin: 0;
        font-size: clamp(28px, 4vw, 38px);
        letter-spacing: -0.02em;
      }

      .heading p {
        margin: 0;
        color: var(--muted);
        font-size: 16px;
        line-height: 1.6;
      }

      .pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 12px;
        border-radius: 999px;
        background: rgba(31, 111, 235, 0.1);
        color: var(--accent);
        font-size: 13px;
        font-weight: 600;
        letter-spacing: 0.02em;
        text-transform: uppercase;
      }

      .layout {
        display: grid;
        grid-template-columns: 1fr;
        gap: 24px;
        margin-top: 28px;
      }

      .note {
        padding: 16px 18px;
        border-radius: 16px;
        border: 1px dashed rgba(31, 34, 48, 0.16);
        background: rgba(31, 111, 235, 0.04);
        font-size: 15px;
        line-height: 1.6;
        color: var(--ink);
      }

      shadow-translate-demo {
        display: block;
        border-radius: 20px;
        overflow: hidden;
        border: 1px solid rgba(31, 34, 48, 0.12);
        box-shadow: 0 18px 40px rgba(31, 34, 48, 0.1);
      }

      @media (min-width: 760px) {
        .layout {
          grid-template-columns: 1.1fr 0.9fr;
          align-items: start;
        }
      }
    </style>
    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react@^18.2.0?target=es2022",
          "react-dom": "https://esm.sh/react-dom@^18.2.0?target=es2022",
          "uuid": "https://esm.sh/uuid@9.0.0",
          "@winm2m/shadow-translate-bridge": "../dist/esm/index.js"
        }
      }
    </script>
  </head>
  <body>
    <main class="frame">
      <div class="heading">
        <span class="pill">Shadow Translate Bridge Demo</span>
        <h1>Chrome translation test with a closed Shadow DOM</h1>
        <p>
          This sentence lives in the light DOM, outside the web component, and should
          translate when Chrome Translate is enabled.
        </p>
      </div>

      <section class="layout">
        <div class="note">
          Open Chrome Translate (right-click the page and choose Translate). The text
          below includes a closed shadow web component built with r2wc. Inside that
          component, only the registered strings use the bridge and should translate.
        </div>

        <shadow-translate-demo></shadow-translate-demo>
      </section>
    </main>

    <script type="module">
      import React, { useState } from "react";
      import { r2wc } from "https://esm.sh/r2wc@0.0.4";
      import {
        TranslationBridgeProvider,
        useTranslateBridge,
      } from "@winm2m/shadow-translate-bridge";

      const e = React.createElement;
      const ShadowCardContent = () => {
        return e(
          "article",
          {
            style: {
              padding: "28px",
              background: "linear-gradient(140deg, #fdf7ef, #eef2ff)",
              fontFamily: "IBM Plex Sans, Segoe UI, sans-serif",
            },
          },
          e(
            "p",
            {
              style: {
                margin: 0,
                color: "#1f6feb",
                fontWeight: 600,
                fontSize: "12px",
                letterSpacing: "0.08em",
                textTransform: "uppercase",
              },
            },
            "Closed Shadow Web Component"
          ),
          e(
            "h2",
            { style: { margin: "12px 0 10px", fontSize: "24px" } },
            useTranslateBridge("Shadow translation demo")
          ),
          e(
            "p",
            { style: { margin: 0, fontSize: "16px", lineHeight: 1.6 } },
            useTranslateBridge("This sentence inside the Shadow DOM should translate.")
          ),
          e(
            "p",
            {
              style: {
                margin: "12px 0 0",
                color: "#6b7280",
                fontSize: "15px",
                lineHeight: 1.6,
              },
            },
            "This sentence stays in English because it is not registered."
          )
        );
      };

      const ShadowTranslationDemo = () =>
        e(TranslationBridgeProvider, null, e(ShadowCardContent));

      customElements.define(
        "shadow-translate-demo",
        r2wc(ShadowTranslationDemo, { shadow: "closed" })
      );
    </script>
  </body>
</html>
